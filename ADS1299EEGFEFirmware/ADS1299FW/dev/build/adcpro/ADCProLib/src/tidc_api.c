/*{{TIDC_Wizard Auto Code Start                                 */
/****************************************************************/
/* don't change anything here until you know what you are doing!*/
/* the plug-in will change all text between the code marks      */
/* without user interaction!                                    */
/*                                                              */
/****************************************************************/

/****************************************************************/
/* software generated by Data Converter Plug-in (DCP)           */
/* based on <C:\CCSTUD~1.1\PLUGINS\AAP_DEV\c5500\didc_55.c> */
/****************************************************************/
/****************************************************************/
/* Texas Instruments Data Converter API 3.0 for the             */
/* TMS320C5500 DSP platform                                     */
/* Copyright © 2000 - 2006 Texas Instruments Incorporated       */
/* All Rights Reserved                                          */
/*--------------------------------------------------------------*/
/* $Revision: 11 $                         $JustDate:  3/21/06 $ */
/* $Author: A0746714 $                                          */
/****************************************************************/
#include "tidc_api.h"

#define TIDC_CMD_POWER          (0xFFFF)
#define DCP_API_2               (0)
#define DCP_API_3               (3)

TTIDCSTATUS dc_configure(void *pDC)
{
    return ((TTIDC *)pDC)->configure(pDC);
}

void dc_power(void *pDC, int bDown)
{
    if (((TTIDC3 *)pDC)->rev == DCP_API_2)
        ((TTIDC *)pDC)->power(pDC, bDown);
    else
        (void)((TTIDC3 *)pDC)->control(pDC, TIDC_CMD_POWER, &bDown);
}

long dc_read(void *pDC)
{
    long temp;
    if (((TTIDC3 *)pDC)->rev == DCP_API_2)
        return ((TTIDC *)pDC)->read(pDC);
    else
    {
        (void)((TTIDC3 *)pDC)->readsample(pDC, &temp);
        return temp;
    }
}

void dc_write(void *pDC, long lData)
{
    if (((TTIDC3 *)pDC)->rev == DCP_API_2)
        ((TTIDC *)pDC)->write(pDC, lData);
    else
        (void)((TTIDC3 *)pDC)->writesample(pDC, lData);
}

void dc_rblock(void *pDC, void *pData,
               unsigned long ulCount, void (*callback) (void *))
{
    if (((TTIDC3 *)pDC)->rev == DCP_API_2)
        ((TTIDC *)pDC)->rblock(pDC, pData, ulCount, callback);
    else
        (void)((TTIDC3 *)pDC)->readblock(pDC, pData, ulCount, callback);
}

void dc_wblock(void *pDC, void *pData,
               unsigned long ulCount, void (*callback) (void *))
{
    if (((TTIDC3 *)pDC)->rev == DCP_API_2)
        ((TTIDC *)pDC)->wblock(pDC, pData, ulCount, callback);
    else
        (void)((TTIDC3 *)pDC)->writeblock(pDC, pData, ulCount, callback);
}

TTIDCSTATUS dc_control(void *pDC, int iCmd, void *pValue)
{
    if (((TTIDC3 *)pDC)->rev == DCP_API_3)
        return ((TTIDC3 *)pDC)->control(pDC, iCmd, pValue);
    else
    {
        if (iCmd == TIDC_CMD_POWER)
        {
            ((TTIDC *)pDC)->power(pDC, *(int *)pValue);
            return TIDC_NO_RETVAL;
        }
        else
            return TIDC_ERR_FXNNULL;
    }
}

TTIDCSTATUS dc_readsample(void *pDC, long *lData)
{
    if (((TTIDC3 *)pDC)->rev == DCP_API_3)
        return ((TTIDC3 *)pDC)->readsample(pDC, lData);
    else
    {
        *lData = ((TTIDC *)pDC)->read(pDC);
        return TIDC_NO_RETVAL;
    }
}

TTIDCSTATUS dc_writesample(void *pDC, long lData)
{
    if (((TTIDC3 *)pDC)->rev == DCP_API_3)
        return ((TTIDC3 *)pDC)->writesample(pDC, lData);
    else
    {
        ((TTIDC *)pDC)->write(pDC, lData);
        return TIDC_NO_RETVAL;
    }
}

TTIDCSTATUS dc_readblock(void *pDC, void *pData, unsigned long ulCount,
                        void (*callback) (void *))
{
    if (((TTIDC3 *)pDC)->rev == DCP_API_3)
        return ((TTIDC3 *)pDC)->readblock(pDC, pData, ulCount, callback);
    else
    {
        ((TTIDC *)pDC)->rblock(pDC, pData, ulCount, callback);
        return TIDC_NO_RETVAL;
    }
}

TTIDCSTATUS dc_writeblock(void *pDC, void *pData, unsigned long ulCount,
                        void (*callback) (void *))
{
    if (((TTIDC3 *)pDC)->rev == DCP_API_3)
        return ((TTIDC3 *)pDC)->writeblock(pDC, pData, ulCount, callback);
    else
    {
        ((TTIDC *)pDC)->wblock(pDC, pData, ulCount, callback);
        return TIDC_NO_RETVAL;
    }
}

TTIDCSTATUS dc_close(void *pDC)
{
    if (((TTIDC3 *)pDC)->rev == DCP_API_3)
        return ((TTIDC3 *)pDC)->close(pDC);
    else
        return TIDC_ERR_FXNNULL;
}

/****************************************************************/
/* END OF tidc_api.c                                             */
/****************************************************************/
/*TIDC_Wizard Auto Code End}}*/
